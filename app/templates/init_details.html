<!DOCTYPE html>
<html>
  <head>
    <title>Init Details</title>
    <style>
      .response-section {
        margin-bottom: 20px;
      }
      .order,
      .fulfillment,
      .item,
      .provider {
        margin-left: 20px;
      }
      .heading {
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div id="responseContent"></div>

    <script>
      window.onload = function () {
        var responseData = JSON.parse(sessionStorage.getItem("initResponse"));
        var responseContainer = document.getElementById("responseContent");

        if (responseData && responseData.responses) {
          responseData.responses.forEach(function (response) {
            var responseDiv = document.createElement("div");
            responseDiv.className = "response-section";

            if (response.message && response.message.order) {
              var order = response.message.order;

              // Order Details
              var orderDiv = document.createElement("div");
              orderDiv.className = "order";
              orderDiv.innerHTML = '<div class="heading">Order Details:</div>';

              // Fulfillments
              order.fulfillments.forEach(function (fulfillment) {
                var fulfillmentDiv = document.createElement("div");
                fulfillmentDiv.className = "fulfillment";
                fulfillmentDiv.innerHTML =
                  '<div class="heading">Fulfillment:</div>' +
                  "<p>ID: " +
                  fulfillment.id +
                  "</p>" +
                  "<p>Email: " +
                  fulfillment.contact.email +
                  "</p>" +
                  "<p>Phone: " +
                  fulfillment.contact.phone +
                  "</p>";
                orderDiv.appendChild(fulfillmentDiv);
              });

              // Items
              order.items.forEach(function (item) {
                var itemDiv = document.createElement("div");
                itemDiv.className = "item";
                itemDiv.innerHTML =
                  '<div class="heading">Item:</div>' +
                  "<p>Name: " +
                  item.descriptor.name +
                  "</p>" +
                  "<p>Short Description: " +
                  item.descriptor.short_desc +
                  "</p>" +
                  "<p>Price: " +
                  item.price.value +
                  " " +
                  item.price.currency +
                  "</p>";
                orderDiv.appendChild(itemDiv);
              });

              // Provider
              var providerDiv = document.createElement("div");
              providerDiv.className = "provider";
              providerDiv.innerHTML =
                '<div class="heading">Provider:</div>' +
                "<p>Name: " +
                order.provider.descriptor.name +
                "</p>" +
                "<p>Short Description: " +
                order.provider.descriptor.short_desc +
                "</p><hr>";
              orderDiv.appendChild(providerDiv);

              responseDiv.appendChild(orderDiv);
            }

            responseContainer.appendChild(responseDiv);
          });
        } else {
          responseContainer.innerHTML = "<p>No data available</p>";
        }
      };
    </script>
  </body>
</html>
